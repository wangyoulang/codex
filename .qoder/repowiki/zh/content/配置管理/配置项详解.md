# 配置项详解

<cite>
**本文档中引用的文件**   
- [config.toml](file://.codex\config.toml)
- [mod.rs](file://codex-rs\core\src\config\mod.rs)
- [types.rs](file://codex-rs\core\src\config\types.rs)
- [config.md](file://docs\config.md)
- [config_loader\mod.rs](file://codex-rs\core\src\config_loader\mod.rs)
- [config_types.rs](file://codex-rs\protocol\src\config_types.rs)
</cite>

## 目录
1. [模型配置](#模型配置)
2. [认证配置](#认证配置)
3. [用户界面配置](#用户界面配置)
4. [沙箱配置](#沙箱配置)
5. [发布配置](#发布配置)
6. [功能特性配置](#功能特性配置)

## 模型配置

### model.default
- **完整路径**: `model.default`
- **数据类型**: 字符串 (String)
- **默认值**: `gpt-5.1-codex-max`
- **有效值范围**: 任何有效的模型标识符，如 `gpt-5.1`, `gpt-5.2`, `o3`, `o4-mini` 等
- **系统行为影响**: 此配置项指定了Codex默认使用的模型。当用户没有明确指定模型时，Codex将使用此配置项指定的模型进行推理和响应生成。不同的模型具有不同的能力、上下文窗口大小和性能特征。

### model.provider
- **完整路径**: `model.provider`
- **数据类型**: 字符串 (String)
- **默认值**: `openai`
- **有效值范围**: `openai`, `ollama`, `lmstudio`, 或任何在 `model_providers` 中定义的自定义提供者ID
- **系统行为影响**: 此配置项决定了Codex从哪个模型提供者获取模型服务。例如，设置为 `openai` 时，Codex将通过OpenAI API访问模型；设置为 `ollama` 时，Codex将连接到本地运行的Ollama服务。

### model.context_window
- **完整路径**: `model.context_window`
- **数据类型**: 整数 (Integer)
- **默认值**: 根据所选模型自动确定
- **有效值范围**: 正整数，通常在 4096 到 131072 之间
- **系统行为影响**: 此配置项设置了模型的上下文窗口大小（以token为单位）。较大的上下文窗口允许模型处理更长的对话历史和更复杂的输入，但可能会增加内存使用和响应时间。

### model.auto_compact_token_limit
- **完整路径**: `model.auto_compact_token_limit`
- **数据类型**: 整数 (Integer)
- **默认值**: 未设置（使用模型默认值）
- **有效值范围**: 正整数
- **系统行为影响**: 当对话的token使用量达到此阈值时，Codex将自动压缩对话历史以节省上下文空间。这有助于在长对话中保持性能和响应速度。

### model.reasoning_effort
- **完整路径**: `model.reasoning_effort`
- **数据类型**: 字符串 (String)
- **默认值**: `medium`
- **有效值范围**: `minimal`, `low`, `medium`, `high`, `xhigh`
- **系统行为影响**: 此配置项控制模型在使用Responses API时的推理努力程度。更高的努力级别会产生更详细和深入的推理过程，但可能会增加响应时间和计算资源消耗。

### model.reasoning_summary
- **完整路径**: `model.reasoning_summary`
- **数据类型**: 字符串 (String)
- **默认值**: `auto`
- **有效值范围**: `auto`, `concise`, `detailed`, `none`
- **系统行为影响**: 此配置项控制模型推理过程的摘要级别。设置为 `none` 可以完全禁用推理摘要，从而减少输出中的冗余信息。

### model.verbosity
- **完整路径**: `model.verbosity`
- **数据类型**: 字符串 (String)
- **默认值**: `medium`
- **有效值范围**: `low`, `medium`, `high`
- **系统行为影响**: 此配置项控制GPT-5系列模型的输出详细程度。较低的详细程度会产生更简洁的回答，而较高的详细程度会提供更详尽的解释。

**Section sources**
- [mod.rs](file://codex-rs\core\src\config\mod.rs#L101-L130)
- [config.md](file://docs\config.md#L58-L234)

## 认证配置

### auth.credentials_store_mode
- **完整路径**: `auth.credentials_store_mode`
- **数据类型**: 字符串 (String)
- **默认值**: `auto`
- **有效值范围**: `file`, `keyring`, `auto`
- **系统行为影响**: 此配置项决定了CLI认证凭据的存储方式。`file` 将凭据存储在Codex主目录的文件中；`keyring` 使用操作系统特定的凭据服务；`auto` 优先使用keyring，如果不可用则回退到文件存储。

### auth.forced_login_method
- **完整路径**: `auth.forced_login_method`
- **数据类型**: 字符串 (String)
- **默认值**: 未设置
- **有效值范围**: `chatgpt`, `api`
- **系统行为影响**: 此配置项限制用户可以使用的登录机制。例如，设置为 `chatgpt` 时，用户只能通过ChatGPT工作区登录，而不能使用API密钥直接认证。

### auth.mcp_oauth_credentials_store_mode
- **完整路径**: `auth.mcp_oauth_credentials_store_mode`
- **数据类型**: 字符串 (String)
- **默认值**: `auto`
- **有效值范围**: `keyring`, `file`, `auto`
- **系统行为影响**: 此配置项决定了MCP OAuth凭据的存储方式。与 `auth.credentials_store_mode` 类似，它控制凭据是存储在操作系统凭据服务中还是Codex主目录的文件中。

**Section sources**
- [mod.rs](file://codex-rs\core\src\config\mod.rs#L244-L260)
- [config_types.rs](file://codex-rs\protocol\src\config_types.rs#L69-L72)

## 用户界面配置

### ui.animations
- **完整路径**: `ui.animations`
- **数据类型**: 布尔值 (Boolean)
- **默认值**: `true`
- **有效值范围**: `true`, `false`
- **系统行为影响**: 此配置项控制TUI中是否启用ASCII动画和闪烁效果。禁用动画可以提高性能，特别是在低配置终端或远程连接中。

### ui.tooltips
- **完整路径**: `ui.tooltips`
- **数据类型**: 布尔值 (Boolean)
- **默认值**: `true`
- **有效值范围**: `true`, `false`
- **系统行为影响**: 此配置项控制TUI欢迎屏幕中是否显示启动工具提示。对于熟悉Codex的用户，可以禁用此选项以获得更简洁的启动体验。

### ui.spinner_style
- **完整路径**: `ui.spinner_style`
- **数据类型**: 字符串 (String)
- **默认值**: `dots`
- **有效值范围**: `dots`, `blocks`, `hash`, `hbars`, `vbars`, `shapes`, `slug`, `openai`, `default`
- **系统行为影响**: 此配置项改变了终端中加载动画的样式。不同的样式提供了不同的视觉体验，用户可以根据个人喜好选择。

### ui.notifications
- **完整路径**: `ui.notifications`
- **数据类型**: 对象 (Object) 或布尔值 (Boolean)
- **默认值**: `true`
- **有效值范围**: `true`, `false`, 或包含通知命令的字符串数组
- **系统行为影响**: 此配置项控制TUI是否在终端未聚焦时发送桌面通知。可以设置为布尔值以启用/禁用通知，或设置为命令数组以指定自定义通知程序。

**Section sources**
- [mod.rs](file://codex-rs\core\src\config\mod.rs#L181-L237)
- [types.rs](file://codex-rs\core\src\config\types.rs#L388-L508)

## 沙箱配置

### sandbox.mode
- **完整路径**: `sandbox.mode`
- **数据类型**: 字符串 (String)
- **默认值**: `read-only`
- **有效值范围**: `read-only`, `workspace-write`, `danger-full-access`
- **系统行为影响**: 此配置项决定了Codex执行模型生成的shell命令时使用的沙箱模式。`read-only` 模式允许读取文件但阻止写入和网络访问；`workspace-write` 模式允许在当前工作目录中写入文件；`danger-full-access` 模式禁用沙箱，允许完全访问系统。

### sandbox.workspace_write
- **完整路径**: `sandbox.workspace_write`
- **数据类型**: 对象 (Object)
- **默认值**: `{ writable_roots: [], network_access: false, exclude_tmpdir_env_var: true, exclude_slash_tmp: true }`
- **有效值范围**: 包含 `writable_roots`, `network_access`, `exclude_tmpdir_env_var`, `exclude_slash_tmp` 字段的对象
- **系统行为影响**: 此配置项在 `sandbox.mode` 设置为 `workspace-write` 时生效，用于进一步配置沙箱行为。可以指定额外的可写根目录、是否允许网络访问等。

### sandbox.policy
- **完整路径**: `sandbox.policy`
- **数据类型**: 对象 (Object)
- **默认值**: 根据 `sandbox.mode` 自动确定
- **有效值范围**: 由系统根据 `sandbox.mode` 和其他相关配置计算得出
- **系统行为影响**: 此配置项是 `sandbox.mode` 的约束版本，确保沙箱策略符合系统要求和用户设置。它在内部用于强制执行沙箱规则。

**Section sources**
- [mod.rs](file://codex-rs\core\src\config\mod.rs#L120-L130)
- [types.rs](file://codex-rs\core\src\config\types.rs#L540-L550)
- [config.md](file://docs\config.md#L302-L349)

## 发布配置

### rollout.enabled
- **完整路径**: `rollout.enabled`
- **数据类型**: 布尔值 (Boolean)
- **默认值**: `true`
- **有效值范围**: `true`, `false`
- **系统行为影响**: 此配置项控制是否启用功能发布机制。当设置为 `true` 时，Codex将根据用户的分组和配置逐步推出新功能；设置为 `false` 时，所有功能将立即对所有用户可用。

### rollout.group
- **完整路径**: `rollout.group`
- **数据类型**: 字符串 (String)
- **默认值**: `default`
- **有效值范围**: 任何有效的分组标识符
- **系统行为影响**: 此配置项指定了用户所属的功能发布分组。不同的分组可能接收到不同的功能集或功能版本，用于A/B测试和渐进式发布。

### rollout.percentage
- **完整路径**: `rollout.percentage`
- **数据类型**: 整数 (Integer)
- **默认值**: `100`
- **有效值范围**: 0 到 100
- **系统行为影响**: 此配置项控制功能发布的百分比。例如，设置为 `50` 表示只有50%的用户会接收到新功能。这有助于在全面推出前评估新功能的影响。

**Section sources**
- [mod.rs](file://codex-rs\core\src\config\mod.rs)
- [config_loader\mod.rs](file://codex-rs\core\src\config_loader\mod.rs)

## 功能特性配置

### features.web_search_request
- **完整路径**: `features.web_search_request`
- **数据类型**: 布尔值 (Boolean)
- **默认值**: `false`
- **有效值范围**: `true`, `false`
- **系统行为影响**: 此配置项允许模型请求网络搜索。当设置为 `true` 时，Codex可以执行网络搜索以获取最新信息，增强其回答的准确性和时效性。

### features.unified_exec
- **完整路径**: `features.unified_exec`
- **数据类型**: 布尔值 (Boolean)
- **默认值**: `false`
- **有效值范围**: `true`, `false`
- **系统行为影响**: 此配置项启用统一的PTY支持的exec工具。当设置为 `true` 时，Codex将使用新的执行工具，可能提供更好的性能和兼容性。

### features.view_image_tool
- **完整路径**: `features.view_image_tool`
- **数据类型**: 布尔值 (Boolean)
- **默认值**: `true`
- **有效值范围**: `true`, `false`
- **系统行为影响**: 此配置项控制是否包含 `view_image` 工具。当设置为 `true` 时，Codex可以处理和显示图像，增强其在视觉任务中的能力。

### features.tui2
- **完整路径**: `features.tui2`
- **数据类型**: 布尔值 (Boolean)
- **默认值**: `false`
- **有效值范围**: `true`, `false`
- **系统行为影响**: 此配置项启用实验性的TUI v2实现。TUI v2可能包含新的视口和历史管理功能，提供更流畅的用户体验。

### features.skills
- **完整路径**: `features.skills`
- **数据类型**: 布尔值 (Boolean)
- **默认值**: `false`
- **有效值范围**: `true`, `false`
- **系统行为影响**: 此配置项启用技能发现和注入功能。当设置为 `true` 时，Codex可以自动识别和利用项目中的特定技能，提高其在特定领域的表现。

### approval_presets
- **完整路径**: `approval_presets`
- **数据类型**: 对象 (Object)
- **默认值**: 包含 `read-only`, `auto`, `full-access` 预设的默认对象
- **有效值范围**: 包含自定义审批预设的对象
- **系统行为影响**: 此配置项定义了审批预设，简化了常见场景下的配置。每个预设包含一组预定义的 `approval_policy` 和 `sandbox_mode` 设置，用户可以通过选择预设快速配置Codex的行为。

**复杂配置项示例**:
1. **只读预设**: 适用于审查和分析任务，Codex可以读取文件并回答问题，但任何编辑、命令执行或网络访问都需要用户批准。
2. **自动预设**: 适用于开发任务，Codex可以在工作区内自由读写文件和执行命令，但在工作区外或进行网络访问时需要用户批准。
3. **完全访问预设**: 适用于信任的环境，Codex拥有完全的磁盘和网络访问权限，无需任何提示。此模式风险极高，仅在完全受控的环境中使用。

**Section sources**
- [mod.rs](file://codex-rs\core\src\config\mod.rs#L330-L331)
- [config.md](file://docs\config.md#L32-L52)
- [types.rs](file://codex-rs\core\src\config\types.rs#L353-L364)